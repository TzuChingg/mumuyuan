import{S as x}from"./SelectList-2CYifP3n.js";import{B as I}from"./BackendFunctions-2ce9RJsM.js";import{_ as w,r as k,o as d,c,a as s,s as m,b as v,d as F,v as y,w as L,j as b,F as B,n as f,t as r,e as M,h as C,T,p as D,f as q}from"./index-d3kt-dkl.js";const S={components:{BackendFunctions:I,SelectList:x},data(){return{booking:[],finishBooking:[],filteredBookingList:[],filteredFinishBookingList:[],search:"",select:"1",isLoading:!1,options:[{value:"1",label:"待確認訂位"},{value:"2",label:"已確認訂位"}],options2:[{value:"2",label:"已確認訂位"},{value:"1",label:"待確認訂位"}]}},methods:{filteredFinishBooking(){this.search?(this.isLoading=!0,setTimeout(()=>{this.filteredFinishBookingList=this.finishBooking.filter(o=>o.phone.includes(this.search)),this.isLoading=!1},500)):(this.isLoading=!0,setTimeout(()=>{this.filteredFinishBookingList=this.finishBooking,this.isLoading=!1},500))},currentDate(){this.search?(this.isLoading=!0,setTimeout(()=>{this.filteredBookingList=this.booking.filter(o=>o.phone.includes(this.search)),this.isLoading=!1},500)):(this.isLoading=!0,setTimeout(()=>{this.filteredBookingList=this.booking,this.isLoading=!1},500))},handleMouseOver(o){const t=this.booking.findIndex(l=>l.id===o);this.booking[t].CancelIcon="bi bi-x-square-fill"},handleMouseLeave(o){const t=this.booking.findIndex(l=>l.id===o);this.booking[t].CancelIcon="bi bi-x-square"},handleMouseOver2(o){const t=this.booking.findIndex(l=>l.id===o);this.booking[t].CheckIcon="bi bi-check-square-fill"},handleMouseLeave2(o){const t=this.booking.findIndex(l=>l.id===o);this.booking[t].CheckIcon="bi bi-check-square"},check(o){const t={isCheck:!0};this.$axios.patch(`/bookingfrom/${o}`,t).then(()=>{location.reload()})},Cancel(o){this.$axios.delete(`/bookingfrom/${o}`).then(()=>{location.reload()})},get(o){this.select=o}},mounted(){this.$axios.get("/bookingfrom").then(o=>{let t=!1;const l=new Date,p=l.getFullYear(),a=l.getMonth()+1,n=l.getDate();o.data.forEach(i=>{const g=i.day.split("/")[0],e=i.day.split("/")[1],_=i.day.split("/")[2];g>=p&&e>=a&&_>=n?t=!1:t=!0,i.isCheck==!1?this.booking.push({name:i.name,phone:i.phone,people:i.personCount,data:i.day,id:i.id,time:i.time,timeout:t,CheckIcon:"bi bi-check-square",CancelIcon:"bi bi-x-square"}):this.finishBooking.push({name:i.name,phone:i.phone,time:i.time,people:i.personCount,data:i.day,id:i.id})})}),this.filteredBookingList=this.booking,this.filteredFinishBookingList=this.finishBooking}},h=o=>(D("data-v-b15540ad"),o=o(),q(),o),U={class:"d-flex"},V={class:"sidebar border-5 pt-3 border-end d-flex bg-secondary flex-column"},O={key:0,class:"main container"},N={class:"mt-5"},j={class:"row justify-content-between"},E={class:"col-8 mb-0 ms-2"},Y={class:"d-flex h-50"},z=h(()=>s("label",{for:"search"},[s("i",{class:"bi bi-search fs-4"})],-1)),A={class:"col-2"},G={key:0},H=h(()=>s("div",{class:"spinner-border",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)),J=[H],K={key:1},P={key:0,class:"card"},Q=h(()=>s("h5",{class:"card-body fs-4"},"查無此訂位",-1)),R=[Q],W={class:"card-body"},X={class:"row"},Z={class:"col-4"},$={class:"ms-6"},ss={class:"m-0"},es={class:"col-4"},ts={class:"m-0"},os={class:"m-0"},is={class:"col-2"},ns={class:"col"},as={key:0},ds=["onMouseover","onMouseleave","data-bs-target"],cs=["onMouseover","onMouseleave","data-bs-target"],ls={key:1},rs=["onMouseover","onMouseleave","onClick"],hs=["id"],_s={class:"modal-dialog"},us={class:"modal-content border-0"},bs=h(()=>s("div",{class:"modal-body fs-3"},"是否確認接受?",-1)),ms={class:"modal-footer border-0"},fs=h(()=>s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1)),gs=["onClick"],vs=["id"],ps={class:"modal-dialog"},ks={class:"modal-content border-0"},ys=h(()=>s("div",{class:"modal-body fs-3"},"是否確認刪除?",-1)),Ls={class:"modal-footer border-0"},Bs=h(()=>s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1)),Ms=["onClick"],Cs={key:1,class:"main container"},xs={class:"mt-5"},Is={class:"row justify-content-between"},ws={class:"col-8 mb-0 ms-2"},Fs={class:"d-flex h-50"},Ts=h(()=>s("label",{for:"search"},[s("i",{class:"bi bi-search fs-4"})],-1)),Ds={class:"col-2"},qs={key:0},Ss=h(()=>s("div",{class:"spinner-border",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)),Us=[Ss],Vs={key:1},Os={key:0,class:"card"},Ns=h(()=>s("h5",{class:"card-body fs-4"},"查無此訂位",-1)),js=[Ns],Es={class:"card-body"},Ys={class:"row"},zs={class:"col-4"},As={class:"ms-6"},Gs={class:"m-0"},Hs={class:"col-4"},Js={class:"m-0"},Ks={class:"m-0"};function Ps(o,t,l,p,a,n){const i=k("BackendFunctions"),g=k("select-list");return d(),c("div",U,[s("aside",V,[t[0]||(m(-1),t[0]=v(i),m(1),t[0])]),v(T,{name:"fade",mode:"out-in"},{default:F(()=>[a.select==1?(d(),c("main",O,[s("div",N,[s("div",j,[s("div",E,[s("div",Y,[z,L(s("input",{type:"search",placeholder:"search",id:"search",onInput:t[1]||(t[1]=(...e)=>n.currentDate&&n.currentDate(...e)),class:"form-control border-0 shadow-none mt-2 fs-4 bg-secondary","onUpdate:modelValue":t[2]||(t[2]=e=>a.search=e)},null,544),[[y,a.search]])])]),s("div",A,[t[3]||(m(-1),t[3]=v(g,{options:a.options,onUpdata:n.get},null,8,["options","onUpdata"]),m(1),t[3])])])]),a.isLoading?(d(),c("div",G,J)):b("",!0),a.isLoading?b("",!0):(d(),c("div",K,[this.filteredBookingList.length==0?(d(),c("div",P,R)):b("",!0),(d(!0),c(B,null,C(a.filteredBookingList,(e,_)=>(d(),c("div",{class:f(["card mb-2 shadow-sm w-100 bg-light",{out:e.timeout}]),key:_},[s("div",W,[s("div",X,[s("div",Z,[s("strong",null,r(e.name),1),s("span",$,r(e.people)+"位",1),s("p",ss,"日期:"+r(e.data),1)]),s("div",es,[s("strong",ts,"電話:"+r(e.phone),1),s("p",os,r(e.time),1)]),s("div",is,[s("p",{class:f(["mt-2 fs-5",{timeout:!e.timeout}])},"已過期",2)]),s("div",ns,[e.timeout==!1?(d(),c("div",as,[s("i",{class:f(["fs-3 float-end mt-1 me-3",e.CancelIcon]),onMouseover:u=>n.handleMouseOver(e.id),onMouseleave:u=>n.handleMouseLeave(e.id),"data-bs-toggle":"modal","data-bs-target":"#CancelModal"+_},null,42,ds),s("i",{class:f(["fs-3 float-end mt-1 me-3",{timeout:e.timeout,[e.CheckIcon]:!0}]),onMouseover:u=>n.handleMouseOver2(e.id),onMouseleave:u=>n.handleMouseLeave2(e.id),"data-bs-toggle":"modal","data-bs-target":"#checkModal"+_},null,42,cs)])):(d(),c("div",ls,[s("i",{class:f(["fs-3 float-end mt-1 me-3",{[e.CancelIcon]:!0}]),onMouseover:u=>n.handleMouseOver(e.id),onMouseleave:u=>n.handleMouseLeave(e.id),onClick:u=>n.Cancel(e.id)},null,42,rs)]))])])]),s("div",{class:"modal fade",id:"checkModal"+_,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[M(" 0 "),s("div",_s,[s("div",us,[bs,s("div",ms,[fs,s("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:u=>n.check(e.id)}," 確認 ",8,gs)])])])],8,hs),s("div",{class:"modal fade",id:"CancelModal"+_,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[M(" 0 "),s("div",ps,[s("div",ks,[ys,s("div",Ls,[Bs,s("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:u=>n.Cancel(e.id)}," 確認 ",8,Ms)])])])],8,vs)],2))),128))]))])):a.select==2?(d(),c("main",Cs,[s("div",xs,[s("div",Is,[s("div",ws,[s("div",Fs,[Ts,L(s("input",{type:"search",placeholder:"search",onInput:t[4]||(t[4]=(...e)=>n.filteredFinishBooking&&n.filteredFinishBooking(...e)),id:"search",class:"form-control border-0 shadow-none mt-2 fs-4 bg-secondary","onUpdate:modelValue":t[5]||(t[5]=e=>a.search=e)},null,544),[[y,a.search]])])]),s("div",Ds,[t[6]||(m(-1),t[6]=v(g,{options:a.options2,onUpdata:n.get},null,8,["options","onUpdata"]),m(1),t[6])])])]),a.isLoading?(d(),c("div",qs,Us)):b("",!0),a.isLoading?b("",!0):(d(),c("div",Vs,[this.filteredFinishBookingList.length==0?(d(),c("div",Os,js)):b("",!0),(d(!0),c(B,null,C(a.filteredFinishBookingList,(e,_)=>(d(),c("div",{class:"card mb-2 shadow-sm w-100 bg-light",key:_},[s("div",Es,[s("div",Ys,[s("div",zs,[s("strong",null,r(e.name),1),s("span",As,r(e.people)+"位",1),s("p",Gs,"日期:"+r(e.data),1)]),s("div",Hs,[s("strong",Js,"電話:"+r(e.phone),1),s("p",Ks,r(e.time),1)])])])]))),128))]))])):b("",!0)]),_:1})])}const Xs=w(S,[["render",Ps],["__scopeId","data-v-b15540ad"]]);export{Xs as default};
